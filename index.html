<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>m3u8 to iframe Converter</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .embed-container {
      display: flex;
      align-items: center;
    }

    #copyEmbedBtn {
      margin-left: 10px;
      padding: 5px 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .logo {
      display: block;
      margin: 20px auto;
      max-width: 200px;
    }

    .player-features {
      margin: 20px auto;
      max-width: 300px;
    }

    .player-preview {
      margin-top: 20px;
    }

    .suggested-urls {
      margin-top: 20px;
    }

    .suggested-urls ul {
      list-style-type: none;
      padding: 0;
    }

    .suggested-urls li {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h1>m3u8 to iframe Converter</h1>
     <h4>Free Online HLS M3U8 Livestream Player</h4>
  </header>
  
  <main>
    <img src="logo.png" alt="Logo" class="logo">
    
    <div class="converter-container">
      <label for="hlsLink">Enter HLS Link:</label>
      <input type="text" id="hlsLink" name="hlsLink" placeholder="Your HLS URL here (.m3u8, .mpd, .mp4, .mkv, .webm)">
      <select id="playerSelect">
        <option value="cleper">Cleper Player</option>
        <option value="jw">JW Player</option>
        <option value="videojs">Video.js Player</option>
      </select>
      <button onclick="generatePreview()">Generate Preview</button>
      <button onclick="loadSimpleHLS()">Load Suggested HLS</button>
    </div>
    
    <div id="previewContainer"></div>
    <br><br>
    <div class="embed-container">
      <input type="text" id="embedLink" style="display: none;">
      <button id="copyEmbedBtn" style="display: none;" onclick="copyEmbedLink()">Copy Embed Link</button>
    </div>

    <section class="player-features">
      <h2>Player Features</h2>
      <ul>
        <li>Free use</li>
        <li>Supports multiple platforms: Android, Mac OS X, tvOS, Windows, Android TV</li>
        <!-- Add more features as needed -->
      </ul>
    </section>

    <section class="embed-instructions">
      <h2>Embedding Instructions</h2>
      <p>Choose your preferred method to embed the HLS stream:</p>

      <h3>HTTPS Method</h3>
      <p>If your website is secured with an SSL certificate:</p>
      <pre><code>&lt;iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="https://anym3u8player.com/tv/p.php?url=<span id="httpsEmbedUrl"></span>" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"&gt;&lt;/iframe&gt;</code></pre>

      <h3>HTTP Method</h3>
      <p>If your website is not secured with an SSL certificate:</p>
      <pre><code>&lt;iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="http://anym3u8player.com/tv/p.php?url=<span id="httpEmbedUrl"></span>" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"&gt;&lt;/iframe&gt;</code></pre>
    </section>

    <section class="suggested-urls">
      <h2>Suggested HLS URLs</h2>
      <p id="suggestedUrlsMsg">Add video URL to start playing:</p>
      <ul id="suggestedUrls"></ul>
    </section>
  </main>

  <!-- Mobile Menu Section -->
  <div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close mt-3">
        <span class="icon-close2 js-menu-toggle"></span>
      </div>
    </div>
    <div class="site-mobile-menu-body">
      <!-- Content for mobile menu goes here -->
    </div>
  </div>
  
  <!-- Footer -->
  <footer>
    <p>&copy; 2024 m3u8 to iframe Converter. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script>
    function generatePreview() {
      var hlsLink = document.getElementById('hlsLink').value;
      var playerSelect = document.getElementById('playerSelect');
      var previewContainer = document.getElementById('previewContainer');
      var copyEmbedBtn = document.getElementById('copyEmbedBtn');
      var embedLinkInput = document.getElementById('embedLink');

      // Clear previous previews
      previewContainer.innerHTML = '';
      embedLinkInput.style.display = 'none';
      copyEmbedBtn.style.display = 'none';

      // Iterate over each player option
      ['cleper', 'jw', 'videojs'].forEach(player => {
        var iframeUrl = convertToIframe(hlsLink, player);

        if (iframeUrl) {
          var iframe = document.createElement('iframe');
          iframe.src = iframeUrl;
          iframe.width = '100%';
          iframe.height = '480px';
          iframe.frameBorder = '0';
          iframe.allowFullscreen = true;

          var playerPreview = document.createElement('div');
          playerPreview.classList.add('player-preview');
          playerPreview.appendChild(iframe);

          previewContainer.appendChild(playerPreview);

          // Display copy embed link button and set input value for the first player
          if (player === 'cleper') {
            copyEmbedBtn.style.display = 'inline-block';
            embedLinkInput.value = iframeUrl;
          }
        } else {
          var errorText = document.createElement('p');
          errorText.textContent = `Error: Invalid HLS Link or Player (${player})`;
          previewContainer.appendChild(errorText);
        }
      });
    }

    function copyEmbedLink() {
      var embedLinkInput = document.getElementById('embedLink');
      embedLinkInput.style.display = 'inline';
      embedLinkInput.select();
      document.execCommand('copy');
      alert('Embed link copied to clipboard!');
    }

    function loadSimpleHLS() {
      // Fetch suggested HLS URLs from JSON file
      fetch('suggested_hls_urls.json')
        .then(response => response.json())
        .then(data => {
          var suggestedUrls = document.getElementById('suggestedUrls');
          suggestedUrls.innerHTML = '';

          if (data && data.urls && data.urls.length > 0) {
            data.urls.forEach(url => {
              var li = document.createElement('li');
              var link = document.createElement('a');
              link.href = '#';
              link.textContent = url;
              link.addEventListener('click', function() {
                document.getElementById('hlsLink').value = url;
              });
              li.appendChild(link);
              suggestedUrls.appendChild(li);
            });

            document.getElementById('suggestedUrlsMsg').textContent = 'Select a suggested HLS URL below:';
          } else {
            document.getElementById('suggestedUrlsMsg').textContent = 'No suggested HLS URLs found.';
          }
        })
        .catch(error => {
          console.error('Error loading suggested HLS URLs:', error);
          document.getElementById('suggestedUrlsMsg').textContent = 'Error loading suggested HLS URLs. Please try again later.';
        });
    }

    function convertToIframe(hlsLink, player) {
      if (!isValidHlsLink(hlsLink)) {
        return null;
      }

      var baseUrl = "https://noobromon.github.io/m3u8-to-iframe/"; // Replace 'yourusername' with your GitHub username
      var playerUrl;

      switch (player) {
        case "cleper":
          playerUrl = baseUrl + "player1";
          break;
        case "jw":
          playerUrl = baseUrl + "player2";
          break;
        case "videojs":
          playerUrl = baseUrl + "player3";
          break;
        default:
          return null;
      }

      return `${playerUrl}/?url=${encodeURIComponent(hlsLink)}`;
    }

    function isValidHlsLink(link) {
      // You can add your validation logic here
      // For simplicity, let's assume any non-empty string is valid
      return link.trim() !== "";
    }
  </script>
</body>
</html>
